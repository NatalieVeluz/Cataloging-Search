<div class="layout-container">

  <app-navigation></app-navigation>

  <div class="main-content">

    <div class="content-wrapper">

      <h2 class="title">
        The Mapúan Cataloging Search Resources Platform<br>
        Pinned Books
      </h2>

      <!-- ================= FILTER SECTION ================= -->
      <div class="filter-section">

        <div class="search-row">

          <select class="search-select" [(ngModel)]="searchBy">
            <option value="title">Title</option>
            <option value="author">Author</option>
            <option value="isbn">ISBN</option>
          </select>

          <input
            type="text"
            class="search-input"
            placeholder="Enter value..."
            [(ngModel)]="keyword"
          />

          <button class="search-btn" (click)="search()">Search</button>
          <button class="search-btn" (click)="resetFilters()">Reset</button>

        </div>

      </div>

      <!-- ================= LOADING ================= -->
      <div class="no-results" *ngIf="isLoading">
        Loading pinned books...
      </div>

      <!-- ================= RESULTS ================= -->
      <div class="results-section"
           *ngIf="!isLoading && filteredBooks.length > 0">

        <div
          class="card-wrapper"
          *ngFor="let book of paginatedBooks; trackBy: trackByIsbn">

          <div class="card-container">

            <app-book-result
              [book]="book"
              (pin)="togglePin($event)">
            </app-book-result>

          </div>

        </div>

        <!-- ================= PAGINATION ================= -->
        <div class="pagination" *ngIf="totalPages > 1">

          <!-- PREVIOUS -->
          <button
            (click)="prevPage()"
            [disabled]="currentPage === 1">
            ◀
          </button>

          <!-- PAGE NUMBERS -->
          <button
            *ngFor="let page of [].constructor(totalPages); let i = index"
            [class.active]="currentPage === i + 1"
            (click)="changePage(i + 1)">
            {{ i + 1 }}
          </button>

          <!-- NEXT -->
          <button
            (click)="nextPage()"
            [disabled]="currentPage === totalPages">
            ▶
          </button>

        </div>

      </div>

      <!-- ================= EMPTY STATE ================= -->
      <div class="no-results"
           *ngIf="!isLoading && filteredBooks.length === 0">
        No pinned books found.
      </div>

    </div>

  </div>

</div>
